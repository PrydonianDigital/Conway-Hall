/*
	krpano Embedding Script
	krpano 1.17.5 (build 2014-08-26)
*/
function createPanoViewer(e){function ot(e){return(""+e)[nt]()}function ut(e,t){return e[d](t)>=0}function at(){var t,r,i,s,o,u,a=n.location;a=a.search||a.hash;if(a){t=a[z](1)[F]("&");for(r=0;r<t[M];r++)i=t[r],s=i[d]("="),s==-1&&(s=i[M]),o=i[z](0,s),u=i[z](s+1),o==A||ot(o)==O?e[O]=u:e[rt](o,u)}}function ft(e){return e[P]=at,e}function lt(){var l,c,h,v,g,y,b,E,S;if(s==p){function x(){var e,n,i,s,o,u,a;if(t[Y]){e=t[Y]["Shockwave Flash"];if(typeof e=="object"){n=e.description;if(n){i=m,t[W]&&(s=t[W]["application/x-shockwave-flash"],s&&(s.enabledPlugin||(i=p)));if(i){o=n[F](" ");for(u=0;u<o[M];++u){a=parseFloat(o[u]);if(isNaN(a))continue;return a}}}}}if(r.ActiveXObject)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e){n=e.GetVariable("$version");if(n)return parseFloat(n[F](" ")[1][F](",").join("."))}}catch(f){}return 0}function T(){var e,t,i=p,s=n[C]("div");for(e=0;e<5;e++)if(typeof s.style[["p","msP","MozP","WebkitP","OP"][e]+"erspective"]!=X){i=m,e==3&&r.matchMedia&&(t=r.matchMedia("(-webkit-transform-3d)"),t&&(i=t.matches==m));break}return i}function N(){var e,t,r=w,i=p;try{e=n[C]("canvas");for(t=0;t<4;t++){r=e.getContext(["webgl","experimental-webgl","moz-webgl","webkit-3d"][t]);if(r)break}r&&(i=m)}catch(s){}return r=w,e=w,i}if(e.isDevice("iphone|ipad|ipod")&&i[d]("opera mini")<0)a=f=m;else{u=x(),u>=10.1&&(o=m),l=T(),c=N(),h=ot(t.platform),v=0,g=0,y=0,b=i[d]("firefox/"),b<0&&(b=i[d]("gecko/")),b>=0&&(v=parseInt(i[j](1+i[d]("/",b)),10)),b=i[d](G),b>0&&(y=parseInt(i[j](b+7),10)),b=i[d](Q),b>0&&(g=parseInt(i[j](b+8),10),v>=18&&(g=4)),l&&(g>0&&g<4&&(l=p),v>3&&v<18&&g>1&&(c=l=p),c||(h[d](K)<0&&v>3&&g<1&&(l=p),y>9&&y<20&&(l=p)));if(l||c){a=m,E=i[d]("blackberry")>=0||i[d]("rim tablet")>=0||i[d]("bb10")>=0,S=(t.msMaxTouchPoints|0)>1;if(g>=4||E||S)f=m}}s=m}}var t,n,r,i,s,o,u,a,f,l,c,h,p=!1,d="indexOf",v="addEventListener",m=!0,g="externalMouseEvent",y="target",b="wmode",w=null,E="targetelement",S="onerror",x="getElementById",T="bgcolor",N="onmousewheel",C="createElement",k="flashbasepath",L="enable_mousewheel_js_bugfix",A="useHTML5",O="html5",M="length",_="params",D="always",P="passQueryParameters",H="consolelog",B="srcElement",j="slice",F="split",I="never",q="onready",R="xml",U="externalMouseEvent2",z="substring",W="mimeTypes",X="undefined",V="mwheel",$="basepath",J="vars",K="mac",Q="android",G="chrome",Y="plugins",Z="stopPropagation",et="lastIndexOf",tt="preventDefault",nt="toLowerCase",rt="addVariable",it='" />',st="only";return t=navigator,n=document,r=window,i=ot(t.userAgent),s=p,o=p,u=0,a=p,f=p,e||(e={}),l=e[P]===m,e.swf||(e.swf="krpano.swf"),e.js||(e.js=w),e[R]===undefined&&(e[R]=e.swf[F](".swf").join(".xml")),e.id||(e.id="krpanoSWFObject"),e.width||(e.width="100%"),e.height||(e.height="100%"),e[T]||(e[T]="#000000"),e[b]||(e[b]=w),e[y]||(e[y]=w),e[O]||(e[O]="auto"),e[V]===undefined&&(e[V]=m),e[J]||(e[J]={}),e[_]||(e[_]={}),e[q]||(e[q]=w),e[$]?e[k]=e[$]:(c="./",h=e.swf[et]("/"),h>=0&&(c=e.swf[j](0,h+1)),e[$]=c),e.isDevice=function(e){var t,n,r,s="all",o=["ipad","iphone","ipod",Q];for(t=0;t<4;t++)i[d](o[t])>=0&&(s+="|"+o[t]);e=ot(e)[F]("|");if(e==w)return m;n=e[M];for(t=0;t<n;t++){r=e[t];if(s[d](r)>=0)return m}return p},e[rt]=function(t,n){t=ot(t),t=="pano"||t==R?e[R]=n:e[J][t]=n},e.addParam=function(t,n){e[_][ot(t)]=n},e[A]!==undefined&&(e[O]=e[A]),e[A]=function(t){e[O]=t},e.isHTML5possible=function(){return lt(),a},e.isFlashpossible=function(){return lt(),o},e[S]||(e[S]=function(t){var n=e[E];n?n.innerHTML='<table width="100%" height="100%"><tr style="vertical-align:middle;"><td><center>ERROR:<br/><br/>'+t+"<br/><br/></center></td></tr></table>":alert("ERROR: "+t)}),e.embed=function(s){var c,h,A,P,F,z,$,Q,rt;s&&(e[y]=s),e[E]=n[x](e[y]);if(!e[E])e[S]("No Embedding Target");else{l&&at(),e[V]==p&&(e[J]["control.disablewheel"]=m),e[H]&&(e[J][H]=e[H]),lt(),c=ot(e[O]),h=o,A=a,P=a&&(!r[G]||n.domain!=""||!o),c==I?A=p:ut(c,st)&&(h=p),ut(c,D)?(o=h=p,a=A=m):A&&(c=="whenpossible"||ut(c,"prefer")&&P||ut(c,"auto")&&f)&&(h=p);if(h&&o){function ft(e){function S(e){function a(){r[v]?(r[v]("DOMMouseScroll",c,p),r[v]("mousewheel",c,p),n[v]("mousedown",f,p),n[v]("mouseup",l,p)):(r.opera?r.attachEvent(N,c):r[N]=n[N]=c,n.onmousedown=f,n.onmouseup=l)}function f(e){e||(e=r.event,e[y]=e[B]),u=e?e[y]:w}function l(e){var t,i,s,a,f,l,c,h;e||(e=r.event,e[y]=e[B]),t=0,i=o[M];for(t=0;t<i;t++){s=o[t];if(s){a=n[s.id];if(a&&s.needfix){f=a.getBoundingClientRect(),l=a==e[y],c=a==u,h=e.clientX>=f.left&&e.clientX<f.right&&e.clientY>=f.top&&e.clientY<f.bottom;if((l||c)&&h==p)try{a[U]&&a[U](0,"mouseUp")}catch(d){}}}}return m}function c(t){var i,u,a,f,l,c;t||(t=r.event,t[y]=t[B]),i=0,u=p,t.wheelDelta?(i=t.wheelDelta/120,r.opera&&s&&(i/=4/3)):t.detail&&(i=-t.detail,s==p&&(i/=3));if(i){a=0,f=o[M];for(a=0;a<f;a++){l=o[a];if(l){c=n[l.id];if(c&&c==t[y]){try{c.jswheel?c.jswheel(i):c[g]?c[g](i):c[L]&&(c[L](),c[g]&&c[g](i))}catch(h){}u=m;break}}}}e[V]==p&&(u=p);if(u)return t[Z]&&t[Z](),t[tt]&&t[tt](),t.cancelBubble=m,t.cancel=m,n[v]||(t.returnValue=p),p}var i,s=ot(t.appVersion)[d](K)>=0,o=r._krpMW,u=w;o||(o=r._krpMW=new Array,a()),i=e[b],o.push({id:e.id,needfix:s||!!r[G]||i=="opaque"||i=="transparent"})}var i,s,o,u,a,f="",l=e[J],c=e[_],h=e.id;for(;;){s=n[x](h);if(!s)break;h+=String.fromCharCode(48+Math.floor(9*Math.random())),e.id=h}e[b]&&(c[b]=e[b]),e[T]&&(c[T]=e[T]),e[R]!==undefined&&(l[R]=e[R]),e[b]=ot(c[b]),c.allowfullscreen="true",c.allowscriptaccess=D;for(i in l)f!=""&&(f+="&"),f+=encodeURIComponent(i)+"="+encodeURIComponent(l[i]);c.flashvars=f,e[k]&&(c.base=e[k]),o="",u=' id="'+h+'" width="'+e.width+'" height="'+e.height+'" style="outline:none;" ',a="_krpcb_"+h,!e[q]||(r[a]=function(){try{delete r[a]}catch(t){r[a]=w}e[q](n[x](h))});if(t[Y]&&t[W]){o='<embed name="'+h+'"'+u+'type="application/x-shockwave-flash" src="'+e.swf+'" ';for(i in c)o+=i+'="'+c[i]+'" ';o+=" />"}else{o="<object"+u+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+e.swf+it;for(i in c)o+='<param name="'+i+'" value="'+c[i]+it;o+="</object>"}e[E].innerHTML=o,S(e)}u>=11.4&&(F=m,ot(t.platform)[d](K)>=0&&ot(t.vendor)[d]("apple")>=0&&(z=i[d]("webkit/"),z>0&&(z=parseFloat(i[j](z+7)),!isNaN(z)&&z>0&&z<534&&(F=p))),F&&e[b]==w&&!e[_][b]&&(e[b]="direct")),ft(e)}else if(A&&a){function ct(t){function i(e,t,r){var i,s=n.getElementsByTagName("head");s&&(s=s[0]),s||(s=n.body),s?(i=n[C]("script"),i.type="text/javascript",i.async=m,i.onload=t,i[S]=r,i.src=e,s.appendChild(i)):r()}function s(){return typeof embedpanoJS!==X}function o(){s()?(e[J][R]=e[R],e[_]=e,e.htmltarget=e[y],embedpanoJS(t)):u()}function u(){t[S]("HTML5 Version not available!")}var r=t.js;r||(r=t.swf,r=r[j](0,r[nt]()[et](".swf")+1)+"js"),s()?o():i(r,o,u)}ct(e)}else $="",Q=c!=I,rt=o==p&&(c==I||!ut(c,D)&&!ut(c,st)),rt&&($+="Adobe Flashplayer 10.1 (or higher)"),rt&&Q&&($+=" or a<br/>"),Q&&($+="HTML5 Browser with CSS 3D Transforms or WebGL support"),rt&&Q&&($+=" are"),$+=" required!",e[S]($)}},ft(e)}function removepano(e){var t,n,r,i,s=document.getElementById(e);if(s){t=window._krpMW;if(t)for(n=0;n<t.length;n++){r=t[n];if(r&&r.id===e){t.splice(n,1);break}}s.unload&&s.unload(),i=s.parentNode,i&&i.removeChild(s)}}function embedpano(e){createPanoViewer(e).embed()};
